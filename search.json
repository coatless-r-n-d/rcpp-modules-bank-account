[{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"James Balamuta. Author, maintainer.","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Balamuta J (2024). RcppBankAccount: Expose BankAccount C++ Class using Rcpp Modules. R package version 0.0.1, https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/, https://github.com/coatless-rd-rcpp/rcpp-modules-bank-account.","code":"@Manual{,   title = {RcppBankAccount: Expose the BankAccount C++ Class using Rcpp Modules},   author = {James Balamuta},   year = {2024},   note = {R package version 0.0.1, https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/},   url = {https://github.com/coatless-rd-rcpp/rcpp-modules-bank-account}, }"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"exposing-c-classes-into-r-through-rcpp-modules","dir":"","previous_headings":"","what":"Exposing C++ Classes into R Through Rcpp Modules","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"RcppBankAccount R package provides example using Rcpp Modules expose C++ classes methods R. example hails working BankAccount class staple tutorials C++ classes.","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"usage","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"Usage","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"install package, must first compiler system compatible R. help obtaining compiler consult either macOS Windows guides. compiler hand, one can install package GitHub :","code":"# install.packages(\"remotes\") remotes::install_github(\"coatless-rd-rcpp/rcpp-modules-bank-account\") library(\"RcppBankAccount\")"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"implementation-details","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"Implementation Details","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"guide focuses providing implementation along path suggested Rcpp Modules Section 2.2: Exposing C++ classes using Rcpp modules. particular, focus expose pure C++ class inside R without modifying underlying C++ class. Largely, means C++ class must “marked ” export using RCPP_MODULE( ... ) macro separate file.","code":"RcppBankAccount ├── DESCRIPTION                  # Package metadata ├── NAMESPACE                    # Function and dependency registration ├── R │   ├── RcppExports.R │   ├── BankAccount-exports.R        # Exporting Rcpp Module's BankAccount into R │   └── BankAccount-pkg.R            # NAMESPACE Import Code for Rcpp Modules ├── README.md                        # Implementation Overview ├── RcppBankAccount.Rproj ├── man │   ├── RcppBankAccount-package.Rd │   └── BankAccount.Rd └── src     ├── Makevars                     # Enable C++11     ├── RcppExports.cpp     ├── BankAccount.cpp              # Class Implementation     ├── BankAccount.h                # Class Definition     └── BankAccount_export.cpp       # Exporting the C++ Class with RCPP_MODULE"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"c-class-definition","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"C++ Class Definition","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"Inside src/BankAccount.h, definition C++ class written inclusion guard. definition “bare-bones” overview expect. meat implementation class given src/BankAccount.cpp file.","code":"//  BankAccount.h  #ifndef BankAccount_H #define BankAccount_H  class BankAccount {  public:    // Constructors   BankAccount();   BankAccount(int starting_balance);    // Modifiers   void deposit(int amount);   void withdraw(int amount);    // Accessor   int get_current_balance();  private:    // Member variables   int current_balance; };  #endif /* BankAccount_H */"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"c-class-implementation","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules > C++ Class Definition","what":"C++ Class Implementation","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"src/BankAccount.cpp, meat behind C++ class implemented. “meat” emphasizes different methods within class behave. ","code":"//  BankAccount.cpp  // Required to use stop() #include <Rcpp.h>  // Retrieve the definition of our BankAccount class #include \"BankAccount.h\"  // Constructors ---- BankAccount::BankAccount() {   current_balance = 250; }  BankAccount::BankAccount(int starting_balance) {   current_balance = starting_balance; }  // Modifiers ---- void BankAccount::deposit(int amount) {   current_balance += amount; }  void BankAccount::withdraw(int amount) {   if (current_balance >= amount) {     current_balance -= amount;   } else {     Rcpp::stop(\"Current balance is %s so we cannot withdraw %s without going negative.\", current_balance, amount);   } }  // Accessors ---- int BankAccount::get_current_balance() {   return current_balance; }"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"writing-the-glue","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"Writing the Glue","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"class definition implementation hand, task switches exposing definition R creating src/BankAccount_export.cpp. Within file, Rcpp Module defined using RCPP_MODULE( ... ) macro. macro, class’ information must specified using different member functions Rcpp::class_. subset member functions given next: Exposes default class constructor parameters. Exposes constructor recognizable C++ data types. e.g. double, int, std::string, . Exposes class method ClassName given FunctionName. Indirect access Class’ fields getter setter functions. Exposes public field read write access R Exposes public field read access R","code":"// BankAccount_export.cpp  // Include Rcpp system header file (e.g. <>) #include <Rcpp.h>  // Include our definition of the BankAccount file (e.g. \"\") #include \"BankAccount.h\"  // Expose (some of) the Student class RCPP_MODULE(RcppBankAccountEx){   Rcpp::class_<BankAccount>(\"BankAccount\")   .default_constructor()   .constructor<int>()   .method(\"deposit\", &BankAccount::deposit)   .method(\"withdraw\", &BankAccount::withdraw)   .property(\"get_current_balance\", &BankAccount::get_current_balance); }"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"exporting-and-documenting-an-rcpp-module","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"Exporting and documenting an Rcpp Module","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"R/BankAccount-exports.R file, write load statement module exposed via RCPP_MODULE( ... ) macro. addition, make sure export class name package loaded anyone can access via new().","code":"# Export the \"BankAccount\" C++ class by explicitly requesting BankAccount be # exported via roxygen2's export tag. #' @export BankAccount  loadModule(module = \"RcppBankAccountEx\", TRUE)"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"package-structure","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"Package Structure","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"register required components Rcpp Modules, NAMESPACE file must populated imports Rcpp methods R packages. addition, package’s dynamic library must specified well. two ways go : Let roxygen2 automatically generate NAMESPACE file; Manually specify NAMESPACE file. roxygen2 markup required can found R/RcppBankAccount-package.R. run documentation generation phase, NAMESPACE file created : Make sure build reload package prior accessing methods.","code":"#' @useDynLib RcppBankAccount, .registration = TRUE #' @import methods Rcpp \"_PACKAGE\" # Generated by roxygen2: do not edit by hand  export(BankAccount) import(Rcpp) import(methods) useDynLib(RcppBankAccount, .registration = TRUE)"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"calling-an-rcpp-module-in-r","dir":"","previous_headings":"Exposing C++ Classes into R Through Rcpp Modules","what":"Calling an Rcpp Module in R","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"point, everything boils constructing object class using new() methods package. new() function initializes C++ object specified C++ class treats like traditional S4 object.","code":"################## ## Constructor  # Use a default constructor jjb_bank = new(BankAccount)  # Supply values to the constructor pete_bank = new(BankAccount, starting_balance = 1000)  ################## ## Setters  jjb_bank$deposit(10)  jjb_bank$withdraw(20)  # This will generate an error jjb_bank$withdraw(10000) # Error in jjb_bank$withdraw(10000) :  #   Current balance is 240 so we cannot withdraw 10000 without going negative.   ################## ## Getters  jjb_bank$get_current_balance # [1] 240"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"Expose the BankAccount C++ Class using Rcpp Modules","text":"GPL (>= 2)","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/BankAccount.html","id":null,"dir":"Reference","previous_headings":"","what":"Create a BankAccount Object from the BankAccount C++ Class — BankAccount","title":"Create a BankAccount Object from the BankAccount C++ Class — BankAccount","text":"Allows creation BankAccount Object C++ R using C++ BankAccount class.","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/BankAccount.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Create a BankAccount Object from the BankAccount C++ Class — BankAccount","text":"starting_balance Amount BankAccount. Default: Start 250.","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/BankAccount.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Create a BankAccount Object from the BankAccount C++ Class — BankAccount","text":"BankAccount object C++ BankAccount Class.","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/BankAccount.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Create a BankAccount Object from the BankAccount C++ Class — BankAccount","text":"","code":"################## ## Constructor  # Construct new BankAccount object called \"jjb_bank\" jjb_bank = new(BankAccount)  ################## ## Setters  jjb_bank$deposit(10) jjb_bank$withdraw(20)  ################## ## Getters  jjb_bank$get_current_balance #> [1] 240"},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/RcppBankAccount-package.html","id":null,"dir":"Reference","previous_headings":"","what":"RcppBankAccount: Expose the BankAccount C++ Class using Rcpp Modules — RcppBankAccount-package","title":"RcppBankAccount: Expose the BankAccount C++ Class using Rcpp Modules — RcppBankAccount-package","text":"Provides implementation BankAccount 'C++' class connected 'R' using 'Rcpp Modules' expose underlying class methods.","code":""},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/RcppBankAccount-package.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"RcppBankAccount: Expose the BankAccount C++ Class using Rcpp Modules — RcppBankAccount-package","text":"RcppBankAccount package showing use Rcpp Modules make available C++ class S4.","code":""},{"path":[]},{"path":"https://rd-rcpp.thecoatlessprofessor.com/rcpp-modules-bank-account/reference/RcppBankAccount-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"RcppBankAccount: Expose the BankAccount C++ Class using Rcpp Modules — RcppBankAccount-package","text":"Maintainer: James Balamuta balamut2@illinois.edu","code":""}]
